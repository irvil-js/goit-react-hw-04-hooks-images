{"version":3,"sources":["App.module.css","components/Loader/Loader.module.css","components/Modal/Modal.module.css","components/Button/Button.module.css","components/Searchbar/Searchbar.module.css","components/ImageGallery/ImageGalleryItem/ImageGalleryItem.js","components/ImageGallery/ImageGallery.js","components/Searchbar/Searchbar.js","components/Button/Button.js","components/Loader/Loader.js","components/Modal/Modal.js","components/ImageGallery/ImageErrorView.js","services/api-service.js","App.js","index.js","components/ImageGallery/ImageGallery.module.css"],"names":["module","exports","ImageGalleryItem","webformatURL","largeImageURL","tags","imageClick","className","styles","imageGalleryItem","src","alt","image","onClick","ImageGallery","images","largeURL","imageGallery","map","index","Searchbar","onSubmit","useState","imageName","setImageName","searchbar","event","preventDefault","trim","toast","error","searchForm","type","searchFormButton","label","value","onChange","target","toLowerCase","input","autoComplete","autoFocus","placeholder","Button","loadMore","button","AppLoader","loader","style","color","height","width","modalRoot","document","querySelector","Modal","onClose","children","useEffect","window","addEventListener","handleKeyDown","removeEventListener","code","createPortal","overlay","currentTarget","modal","ImageErrorView","message","propTypes","PropTypes","string","axios","defaults","baseURL","api","page","fetchGallery","name","url","this","fetch","then","responce","ok","json","Promise","reject","Error","resetPage","Status","App","setLargeImageURL","setImages","total","setTotal","setPage","setError","status","setStatus","isLoading","setIsLoading","galleryAPI","hits","length","i","catch","scrollTo","top","documentElement","offsetHeight","behavior","app","text","Loader","imagesClick","nodeName","dataset","sourse","autoClose","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.74ca7688.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"App\":\"App_App__6l0fT\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"loader\":\"Loader_loader__IRIOL\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"overlay\":\"Modal_overlay__Ksatj\",\"modal\":\"Modal_modal__1dqbM\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"button\":\"Button_button__1_Y5x\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"searchbar\":\"Searchbar_searchbar__28r0N\",\"searchForm\":\"Searchbar_searchForm__2aGuc\",\"searchFormButton\":\"Searchbar_searchFormButton__3rF6F\",\"label\":\"Searchbar_label__3V1nE\",\"input\":\"Searchbar_input__1rj4W\"};","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nimport styles from \"../ImageGallery.module.css\";\r\n\r\nfunction ImageGalleryItem({\r\n  webformatURL = \"https://picsum.photos/600/400\",\r\n  largeImageURL = \"https://picsum.photos/600/400\",\r\n  tags,\r\n  imageClick,\r\n}) {\r\n  return (\r\n    <li className={styles.imageGalleryItem}>\r\n      <img\r\n        src={webformatURL}\r\n        data-sourse={largeImageURL}\r\n        alt={tags}\r\n        className={styles.image}\r\n        onClick={imageClick}\r\n      />\r\n    </li>\r\n  );\r\n}\r\n\r\nexport default ImageGalleryItem;\r\n\r\nImageGalleryItem.propTypes = {\r\n  tags: PropTypes.string,\r\n  webformatURL: PropTypes.string,\r\n  largeImageURL: PropTypes.string,\r\n  imageClick: PropTypes.func,\r\n};\r\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport ImageGalleryItem from \"./ImageGalleryItem\";\r\nimport styles from \"./ImageGallery.module.css\";\r\n\r\nconst ImageGallery = ({ images, largeURL }) => {\r\n  return (\r\n    <ul className={styles.imageGallery}>\r\n      {images.map((image, index) => (\r\n        <ImageGalleryItem\r\n          key={index}\r\n          webformatURL={image.webformatURL}\r\n          largeImageURL={image.largeImageURL}\r\n          tags={image.tags}\r\n          imageClick={largeURL}\r\n        />\r\n      ))}\r\n    </ul>\r\n  );\r\n};\r\n\r\nexport default ImageGallery;\r\n\r\nImageGallery.propTypes = {\r\n  images: PropTypes.array,\r\n  largeURL: PropTypes.func,\r\n};\r\n","import React, { useState } from \"react\";\r\nimport { toast } from \"react-toastify\";\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\nimport PropTypes from \"prop-types\";\r\nimport styles from \"./Searchbar.module.css\";\r\n\r\nfunction Searchbar({ onSubmit }) {\r\n  const [imageName, setImageName] = useState(\"\");\r\n\r\n  const handleNameChange = (event) => {\r\n    setImageName(event.target.value.toLowerCase());\r\n  };\r\n\r\n  const handleSubmit = (event) => {\r\n    event.preventDefault();\r\n\r\n    if (imageName.trim() === \"\") {\r\n      toast.error(\"Введите текст для поиска\");\r\n      return;\r\n    }\r\n\r\n    onSubmit(imageName);\r\n    setImageName(\"\");\r\n  };\r\n\r\n  return (\r\n    <header className={styles.searchbar}>\r\n      <form onSubmit={handleSubmit} className={styles.searchForm}>\r\n        <button type=\"submit\" className={styles.searchFormButton}>\r\n          <span className={styles.label}>Search</span>\r\n        </button>\r\n        <input\r\n          value={imageName}\r\n          onChange={handleNameChange}\r\n          className={styles.input}\r\n          type=\"text\"\r\n          autoComplete=\"off\"\r\n          autoFocus\r\n          placeholder=\"Search images and photos\"\r\n        />\r\n      </form>\r\n    </header>\r\n  );\r\n}\r\n\r\nexport default Searchbar;\r\n\r\nSearchbar.propTypes = {\r\n  imageName: PropTypes.string,\r\n};\r\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport styles from \"./Button.module.css\";\r\n\r\nfunction Button({ loadMore }) {\r\n  return (\r\n    <button className={styles.button} type=\"button\" onClick={loadMore}>\r\n      Load more\r\n    </button>\r\n  );\r\n}\r\n\r\nexport default Button;\r\n\r\nButton.propTypes = {\r\n  onClick: PropTypes.func,\r\n};\r\n","import React from \"react\";\r\nimport Loader from \"react-loader-spinner\";\r\nimport styles from \"./Loader.module.css\";\r\nimport \"react-loader-spinner/dist/loader/css/react-spinner-loader.css\";\r\n\r\nfunction AppLoader() {\r\n  return (\r\n    <div className={styles.loader}>\r\n      <Loader\r\n        style={styles}\r\n        type=\"ThreeDots\"\r\n        color=\"#3f51b5\"\r\n        height={100}\r\n        width={100}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default AppLoader;\r\n","import React, { useEffect } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { createPortal } from \"react-dom\";\r\nimport styles from \"./Modal.module.css\";\r\n\r\nconst modalRoot = document.querySelector(\"#modal-root\");\r\n\r\nfunction Modal({ onClose, children }) {\r\n  useEffect(() => {\r\n    window.addEventListener(\"keydown\", handleKeyDown);\r\n\r\n    return () => window.removeEventListener(\"keydown\", handleKeyDown);\r\n  });\r\n\r\n  const handleKeyDown = (event) => {\r\n    if (event.code === \"Escape\") {\r\n      onClose();\r\n    }\r\n  };\r\n  const handleBackdropClick = (event) => {\r\n    if (event.currentTarget === event.target) {\r\n      onClose();\r\n    }\r\n  };\r\n\r\n  return createPortal(\r\n    <div className={styles.overlay} onClick={handleBackdropClick}>\r\n      <div className={styles.modal}>{children}</div>\r\n    </div>,\r\n    modalRoot\r\n  );\r\n}\r\n\r\nexport default Modal;\r\n\r\nModal.propTypes = {\r\n  onClose: PropTypes.func.isRequired,\r\n};\r\n","import { toast } from \"react-toastify\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nexport default function ImageErrorView({ message }) {\r\n  return toast.error(`${message}`);\r\n}\r\n\r\nImageErrorView.propTypes = {\r\n  message: PropTypes.string,\r\n};\r\n","import axios from \"axios\";\r\n\r\nconst API_KEY = \"21325700-25e62cbcf61651ae4fee03a33\";\r\naxios.defaults.baseURL = \"https://pixabay.com/api\";\r\n\r\nconst api = {\r\n  page: 1,\r\n\r\n  fetchGallery(name) {\r\n    const url = `https://pixabay.com/api/?q=${name}&page=${this.page}&key=${API_KEY}&image_type=photo&orientation=horizontal&per_page=12`;\r\n\r\n    return fetch(url).then((responce) => {\r\n      this.page += 1;\r\n\r\n      if (responce.ok) {\r\n        return responce.json();\r\n      }\r\n      return Promise.reject(new Error(`Нет картинок по запросу ${name}`));\r\n    });\r\n  },\r\n  resetPage() {\r\n    this.page = 1;\r\n  },\r\n};\r\n\r\nexport default api;\r\n","// import React, { useState, useEffect } from \"react\";\r\n// import SearchBar from \"./components/Searchbar\";\r\n// import ImageGallery from \"./components/ImageGallery\";\r\n// import Button from \"./components/Button\";\r\n// import Modal from \"./components/Modal\";\r\n// import AppLoader from \"./components/Loader\";\r\n// import fetchImages from \"./services/api-service\";\r\n// import styles from \"./App.module.css\";\r\n\r\nimport { useState, useEffect } from \"react\";\r\nimport { ToastContainer } from \"react-toastify\";\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\nimport { toast } from \"react-toastify\";\r\n\r\nimport styles from \"./App.module.css\";\r\n\r\nimport ImageGallery from \"./components/ImageGallery\";\r\nimport Searchbar from \"./components/Searchbar\";\r\nimport Button from \"./components/Button/\";\r\nimport Loader from \"./components/Loader\";\r\nimport Modal from \"./components/Modal\";\r\nimport ImageErrorView from \"./components/ImageGallery/ImageErrorView\";\r\n\r\nimport galleryAPI from \"./services/api-service\";\r\n\r\nconst Status = {\r\n  IDLE: \"idle\",\r\n  PENDING: \"pending\",\r\n  RESOLVED: \"resolved\",\r\n  REJECTED: \"rejected\",\r\n};\r\n\r\nexport default function App() {\r\n  const [imageName, setImageName] = useState(\"\");\r\n  const [largeImageURL, setLargeImageURL] = useState(\"\");\r\n  const [images, setImages] = useState([]);\r\n  const [total, setTotal] = useState(null);\r\n  const [page, setPage] = useState(1);\r\n  const [error, setError] = useState(null);\r\n  const [status, setStatus] = useState(Status.IDLE);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n\r\n  const handleFormSubmit = (imageName) => {\r\n    galleryAPI.resetPage();\r\n\r\n    setImageName(imageName);\r\n    setImages([]);\r\n    setPage(1);\r\n  };\r\n\r\n  const toggleModal = () => {\r\n    setLargeImageURL(\"\");\r\n  };\r\n\r\n  const largeImgModal = (event) => {\r\n    const imagesClick = event.target;\r\n\r\n    if (imagesClick.nodeName !== \"IMG\") {\r\n      return;\r\n    }\r\n\r\n    const largeURL = imagesClick.dataset.sourse;\r\n    setLargeImageURL(largeURL);\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (imageName === \"\") {\r\n      return;\r\n    }\r\n\r\n    setStatus(Status.PENDING);\r\n\r\n    const scrollPage = () => {\r\n      window.scrollTo({\r\n        top: document.documentElement.offsetHeight,\r\n        behavior: \"smooth\",\r\n      });\r\n    };\r\n\r\n    galleryAPI\r\n      .fetchGallery(imageName, page)\r\n\r\n      .then(({ hits, total }) => {\r\n        if (hits.length === 0) {\r\n          toast.error(\"По вашему запросу нет нужного результата!\");\r\n        }\r\n        setImages((i) => [...i, ...hits]);\r\n        setTotal(total);\r\n        setIsLoading(false);\r\n        setStatus(Status.RESOLVED);\r\n      })\r\n      .catch((error) => {\r\n        setError(error);\r\n        setStatus(Status.REJECTED);\r\n      });\r\n    scrollPage();\r\n  }, [imageName, page]);\r\n\r\n  const onLoadMore = () => {\r\n    setIsLoading(true);\r\n    setPage((page) => page + 1);\r\n  };\r\n\r\n  return (\r\n    <div className={styles.app}>\r\n      <Searchbar onSubmit={handleFormSubmit} />\r\n      {status === Status.IDLE && (\r\n        <div className={styles.text}>Введите текст для поиска</div>\r\n      )}\r\n      {status === Status.PENDING && <Loader />}\r\n      {status === Status.REJECTED && <ImageErrorView message={error.message} />}\r\n      {total > 1 && status === Status.RESOLVED && (\r\n        <ImageGallery images={images} largeURL={largeImgModal} />\r\n      )}\r\n      {largeImageURL && (\r\n        <Modal onClose={toggleModal}>\r\n          <img src={largeImageURL} alt={imageName} />\r\n        </Modal>\r\n      )}\r\n      {isLoading && <Loader />}\r\n\r\n      {total > images.length && <Button loadMore={onLoadMore} />}\r\n      <ToastContainer autoClose={3000} />\r\n    </div>\r\n  );\r\n}\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport './index.css';\nimport 'modern-normalize/modern-normalize.css';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"imageGallery\":\"ImageGallery_imageGallery__16-WK\",\"ImageGalleryItem\":\"ImageGallery_ImageGalleryItem__2J-Ur\",\"imageGalleryItem\":\"ImageGallery_imageGalleryItem__2vsuk\"};"],"sourceRoot":""}